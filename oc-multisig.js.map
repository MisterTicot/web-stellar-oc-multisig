{"version":3,"sources":["webpack://multisig/webpack/universalModuleDefinition","webpack://multisig/webpack/bootstrap","webpack://multisig/./node_modules/@cosmic-plus/base/es5/stellar-sdk.js","webpack://multisig/./node_modules/@babel/runtime/regenerator/index.js","webpack://multisig/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://multisig/./es5/resolve.js","webpack://multisig/./node_modules/@cosmic-plus/jsutils/es5/env.js","webpack://multisig/./node_modules/@cosmic-plus/base/es5/buffer.js","webpack://multisig/./es5/messenger.js","webpack://multisig/./es5/index.js","webpack://multisig/./es5/multisig.js","webpack://multisig/./node_modules/regenerator-runtime/runtime.js","webpack://multisig/./node_modules/@cosmic-plus/base/es5/axios.js","webpack://multisig/./node_modules/process/browser.js","webpack://multisig/(webpack)/buildin/global.js","webpack://multisig/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://multisig/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://multisig/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://multisig/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://multisig/./node_modules/@cosmic-plus/jsutils/es5/misc.js","webpack://multisig/./es5/share-signatures.js","webpack://multisig/./node_modules/@cosmic-plus/loopcall/es5/index.js","webpack://multisig/./es5/share-transactions.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","env","isBrowser","undefined","StellarSdk","console","error","nodeRequire","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","done","Promise","then","fn","self","this","args","arguments","apply","err","_toConsumableArray","_regeneratorRuntime","_asyncToGenerator","helpers","networkPassphrase","network","Networks","PUBLIC","TESTNET","currentNetwork","Network","current","server","conf","length","passphrase","Error","getServer","newPassphrase","log","use","serverSaves","networkDefaultServer","url","Server","accountCacheExpiration","accountCache","_cacheAccount","mark","_callee8","address","promise","wrap","_context8","prev","next","timeout","stop","_addressResolver","_callee9","account","publicKey","alias","_context9","FederationServer","sent","account_id","memo_type","memo","aliases","abrupt","getTxSignersList","_x17","_x18","_getTxSignersList","_callee10","transaction","sources","_context10","txSources","signersList","concat","_x3","_x4","addressResolver","_x","_x2","cacheAccount","_ref","_callee","accountResponse","_args","_context","loadAccount","_x5","_x6","accountIsEmpty","_ref2","_callee2","id","_context2","_x7","_x8","_ref3","_callee3","txHash","caller","_context3","transactions","_x9","_x10","accountSigners","_ref4","_callee4","_context4","signers","_x11","_x12","signersTable","_ref5","_callee5","obj","_len","addresses","_key","index","_args5","_context5","Array","t0","keys","t1","_x13","_ref6","_callee6","array","_len2","_key2","_args6","_context6","forEach","entry","find","a","push","_x14","extra","useExtra","source","_loop","operations","txSignersList","_ref7","_callee7","_context7","_x15","_x16","extraField","document","isNode","process","versions","node","isEmbedded","top","global","stealth_require","eval","Memo","__proto__","constructor","Buffer","messenger","loopcall","addMemo","txBuilder","slicedMemo","from","slice","toString","addDestinations","_addDestinations","destinations","accountId","addDestination","isArray","linkToAccount","addOperation","_linkToAccount","operation","destination","startingBalance","asset","Asset","amount","addContent","content","operationsLeft","chunk","storeChunk","type","params","Operation","extractObject","_type","_value","extractContent","chunks","isContentChunk","makeMessageFilter","baseFilter","record","operation_count","send","keypair","senderAccount","tx","encode","sign","submitTransaction","TransactionBuilder","fee","setTimeout","InfiniteTimeout","build","read","callBuilder","txRecord","decode","Transaction","envelope_xdr","sender","source_account","date","created_at","list","options","records","listRaw","map","_x19","_x20","forAccount","cursor","order","filter","_x21","_x22","func","limit","_x23","_x24","_x25","baseConf","passConfig","layer","assign","prepare","networkBackup","multisig","axios","shareSignatures","shareTransactions","makeSetupTx","multisigId","Keypair","random","isEmpty","setData","manageData","makeDisableTx","data_attr","parseMultisigConfig","readAttr","str64","getAccount","_getAccount","user","_baseAccount","Account","_accountId","TypeError","checkAccountExist","_x26","_x27","_checkAccountExist","_callee11","_context11","sendOrReturn","_x28","_x29","_x30","_sendOrReturn","_callee12","responsePromise","_context12","response","saveNetwork","restoreNetwork","isEnabled","config","enable","setup","disable","pushSignatures","senderId","pushTx","horizonResponse","makePushTx","pullSignatures","bool","pull","pushTransaction","_ref8","signer","signatures","listTransactions","_ref9","ledger","useNetwork","runtime","Op","hasOwn","$Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","setPrototypeOf","awrap","async","iter","reverse","pop","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","e","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","len","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","g","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","arr2","misc","delay","thunk","memoized","firstCall","x","capitalize","string","substr","toUpperCase","shorter","setHiddenProperty","configurable","deprecated","before","after","isUtf8","match","isBase64","day","time","Date","toISOString","replace","copy","onlyInFirstArray","array1","array2","y","getSignatures","_getSignatures","txHash64","isTxSourceLegit","containsSignature","mergeSignatures","newSignatures","txSigs","signature","fromPublicKey","verify","decoratedSignature","Constructor","xdr","DecoratedSignature","hint","signatureHint","makeDecorated","alreadyOnchain","message","hash","loop","callAnswer","splitAt","tailRecords","loopWithBreakpoints","_loopWithBreakpoints","nextRecord","breaker","callerLimit","Math","min","isLegitSharedTransaction","legitSources","decodeTransactionRequest","ledger_attr","transactionHasBeenPushed","_transactionHasBeenPushed","tester","recordHasMemo","listSignersKeys","lastLedger","txRecords","toEnvelope","toXDR"],"mappings":"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","file":"oc-multisig.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"multisig\"] = factory();\n\telse\n\t\troot[\"multisig\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","\"use_strict\";\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nif (env.isBrowser) {\n  if (window.StellarSdk === undefined) console.error(\"Missing dependency: StellarSdk\");else module.exports = window.StellarSdk;\n} else {\n  module.exports = env.nodeRequire(\"stellar-sdk\");\n}","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","var _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\n/**\n * Contains functions that probe the blockchain or federation servers to collect\n * datas.\n *\n * Note: this is copied from js-cosmic-lib and I didnt cleaned it up yet\n *\n * @private\n * @exports resolve\n */\nvar resolve = exports;\n\nvar helpers = require(\"@cosmic-plus/jsutils/es5/misc\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n/**\n *\n */\n\n\nresolve.server = function (conf) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n  var server = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : conf.server;\n  var passphrase = networkPassphrase(network);\n  if (!passphrase) throw new Error(\"No network selected.\");\n  return getServer(passphrase, server);\n};\n/**\n * Select the network to be used by `StellarSdk` as being `c` current\n * network.\n */\n\n\nresolve.network = function (conf) {\n  var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : conf.network;\n  var server = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : conf.server;\n  var passphrase = networkPassphrase();\n  var newPassphrase = networkPassphrase(network);\n\n  if (passphrase !== newPassphrase) {\n    // eslint-disable-next-line no-console\n    console.log(\"Switch to network: \" + network);\n    StellarSdk.Network.use(new StellarSdk.Network(newPassphrase));\n    passphrase = newPassphrase;\n  } else if (!passphrase) {\n    throw new Error(\"No network selected.\");\n  }\n\n  return getServer(passphrase, server);\n};\n/**\n * Returns passphrase for `network` or for current network.\n */\n\n\nfunction networkPassphrase(network) {\n  if (network) {\n    if (network === \"public\") return StellarSdk.Networks.PUBLIC;else if (network === \"test\") return StellarSdk.Networks.TESTNET;else return network;\n  } else {\n    var currentNetwork = StellarSdk.Network.current();\n    if (currentNetwork) return currentNetwork.networkPassphrase();\n  }\n}\n/**\n * If `url` is given, set it as the default horizon instance for `passphrase`\n * network and returns the corresponding Server object.\n * Else, retrieve the default Server object for `passphrase` network.\n */\n\n\nvar serverSaves = {};\nvar networkDefaultServer = {};\n\nfunction getServer(passphrase, url) {\n  if (url) networkDefaultServer[passphrase] = url;else url = networkDefaultServer[passphrase];\n  if (!url) throw new Error(\"No default server for requested network.\");\n  if (!serverSaves[url]) serverSaves[url] = new StellarSdk.Server(url);\n  return serverSaves[url];\n} /// Save defaults horizon nodes.\n\n\ngetServer(StellarSdk.Networks.PUBLIC, \"https://horizon.stellar.org\");\ngetServer(StellarSdk.Networks.TESTNET, \"https://horizon-testnet.stellar.org\");\n/**\n * Configure for how much time the resolved addresses are kept in cache,\n * in seconds. The default is set to 5 minutes to avoid resolving to an outdated\n * address.\n *\n * @const\n */\n\nresolve.accountCacheExpiration = 5 * 60;\n/**\n * Contains promise of previously fetched accounts.\n *\n * @private\n * @type {Object}\n */\n\nvar accountCache = {};\n/**\n * Cache `promise` resolving to `address`'s account for `accountCacheExpiration`\n * seconds.\n *\n * @private\n * @param {string} address\n * @param {Promise} promise\n */\n\nfunction cacheAccount(_x, _x2) {\n  return _cacheAccount.apply(this, arguments);\n}\n/**\n * Return a promise that resolve to `address` account object, as defined in\n * JavaScript Stellar SDK API reference. `address` can be either a Stellar public\n * key or a federated address (account*example.org).\n * Returned results are cached and re-usable.\n *\n * @param {string} address\n * @return {Promise} Resolve to `address` account object\n */\n\n\nfunction _cacheAccount() {\n  _cacheAccount = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee8(address, promise) {\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            accountCache[address] = promise;\n            _context8.next = 3;\n            return helpers.timeout(resolve.accountCacheExpiration * 1000);\n\n          case 3:\n            delete accountCache[address];\n\n          case 4:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _cacheAccount.apply(this, arguments);\n}\n\nresolve.address = function (c, address) {\n  if (accountCache[address]) return accountCache[address];\n  var promise = addressResolver(c, address);\n  cacheAccount(address, promise);\n  return promise;\n};\n/**\n * Helper for the previous resolve.address function.\n * Resolve to an account object for `address`.\n *\n * @private\n * @param {string} address\n */\n\n\nfunction addressResolver(_x3, _x4) {\n  return _addressResolver.apply(this, arguments);\n}\n/**\n * Return the AccountResponse object for `address` on `network`.\n *\n * @param {CL}\n * @param {string} address A public key or a federated address\n * @param {string} network Either 'test' or 'public'\n * @return {Object} The account response\n */\n\n\nfunction _addressResolver() {\n  _addressResolver = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee9(c, address) {\n    var account, publicKey, alias;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return StellarSdk.FederationServer.resolve(address);\n\n          case 2:\n            account = _context9.sent;\n            publicKey = account.account_id;\n\n            if (publicKey) {\n              _context9.next = 6;\n              break;\n            }\n\n            throw new Error(\"Invalid response from federation server.\");\n\n          case 6:\n            if (!account.memo_type && account.memo !== undefined) delete account.memo;\n            if (address !== publicKey) account.address = address;\n            alias = c.aliases && c.aliases[publicKey];\n            if (alias) account.alias = alias;\n            return _context9.abrupt(\"return\", account);\n\n          case 11:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _addressResolver.apply(this, arguments);\n}\n\nresolve.account =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(c, address) {\n    var network,\n        server,\n        account,\n        publicKey,\n        accountResponse,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            network = _args.length > 2 && _args[2] !== undefined ? _args[2] : c.network;\n            server = resolve.server(c, network);\n            _context.next = 4;\n            return resolve.address(c, address);\n\n          case 4:\n            account = _context.sent;\n            publicKey = account.account_id; // try {\n\n            _context.next = 8;\n            return server.loadAccount(publicKey);\n\n          case 8:\n            accountResponse = _context.sent;\n            return _context.abrupt(\"return\", accountResponse);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nresolve.accountIsEmpty =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(conf, id) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", resolve.account(conf, id).then(function () {\n              return false;\n            })[\"catch\"](function () {\n              return true;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nresolve.transaction =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(conf, txHash) {\n    var caller;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            caller = conf.server.transactions();\n            return _context3.abrupt(\"return\", caller.transaction(txHash).call());\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n/**\n * Return the signers for the account at `address` on `network`.\n *\n * @param {CL}\n * @param {string} address Either a public key or a federated address\n * @param {string} network Either 'test' or 'public'\n * @return {Object} The signers object from the account response\n */\n\n\nresolve.accountSigners =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(c, address) {\n    var account;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return resolve.account(c, address);\n\n          case 2:\n            account = _context4.sent;\n            return _context4.abrupt(\"return\", account.signers);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nresolve.signersTable =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(conf) {\n    var obj,\n        _len,\n        addresses,\n        _key,\n        index,\n        account,\n        _args5 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            obj = {};\n\n            for (_len = _args5.length, addresses = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              addresses[_key - 1] = _args5[_key];\n            }\n\n            _context5.t0 = _regeneratorRuntime.keys(addresses);\n\n          case 3:\n            if ((_context5.t1 = _context5.t0()).done) {\n              _context5.next = 11;\n              break;\n            }\n\n            index = _context5.t1.value;\n            _context5.next = 7;\n            return resolve.account(conf, addresses[index]);\n\n          case 7:\n            account = _context5.sent;\n            if (!obj[account.id]) obj[account.id] = account.signers;\n            _context5.next = 3;\n            break;\n\n          case 11:\n            return _context5.abrupt(\"return\", obj);\n\n          case 12:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x13) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nresolve.signersList =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(conf) {\n    var array,\n        _len2,\n        addresses,\n        _key2,\n        index,\n        account,\n        _args6 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            array = [];\n\n            for (_len2 = _args6.length, addresses = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              addresses[_key2 - 1] = _args6[_key2];\n            }\n\n            _context6.t0 = _regeneratorRuntime.keys(addresses);\n\n          case 3:\n            if ((_context6.t1 = _context6.t0()).done) {\n              _context6.next = 11;\n              break;\n            }\n\n            index = _context6.t1.value;\n            _context6.next = 7;\n            return resolve.account(conf, addresses[index]);\n\n          case 7:\n            account = _context6.sent;\n            account.signers.forEach(function (entry) {\n              if (!array.find(function (a) {\n                return a.key === entry.key;\n              })) array.push(entry.key);\n            });\n            _context6.next = 3;\n            break;\n\n          case 11:\n            return _context6.abrupt(\"return\", array);\n\n          case 12:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function (_x14) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nresolve.txSources = function (conf, transaction) {\n  var extra = useExtra(transaction);\n  if (extra.sources) return extra.sources;\n  var array = [transaction.source];\n\n  var _loop = function _loop(index) {\n    var source = transaction.operations[index].source;\n    if (source && !array.find(function (a) {\n      return a === source;\n    })) array.push(source);\n  };\n\n  for (var index in transaction.operations) {\n    _loop(index);\n  }\n\n  extra.sources = array;\n  return array;\n};\n\nresolve.txSignersList =\n/*#__PURE__*/\nfunction () {\n  var _ref7 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(conf, transaction) {\n    var extra;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            extra = useExtra(transaction);\n            if (!extra.signers) extra.signers = getTxSignersList(conf, transaction);\n            return _context7.abrupt(\"return\", extra.signers);\n\n          case 3:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x15, _x16) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nfunction getTxSignersList(_x17, _x18) {\n  return _getTxSignersList.apply(this, arguments);\n}\n\nfunction _getTxSignersList() {\n  _getTxSignersList = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee10(conf, transaction) {\n    var sources;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            sources = resolve.txSources(conf, transaction);\n            return _context10.abrupt(\"return\", resolve.signersList.apply(resolve, [conf].concat(_toConsumableArray(sources))));\n\n          case 2:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _getTxSignersList.apply(this, arguments);\n}\n\nvar extraField = \"extra_ocmultisig\";\n\nfunction useExtra(obj) {\n  if (!obj[extraField]) obj[extraField] = {};\n  return obj[extraField];\n}","\"use_strict\";\n/**\n * Methods to detect in which environment we're running.\n *\n * @exports env\n */\n\nvar env = exports;\n/**\n * `true` if we are in a browser environment, `false` otherwise.\n */\n\nenv.isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n/**\n * `true` if we are in a node.js environment, `false` otherwise.\n */\n\nenv.isNode = typeof process !== \"undefined\" && process.versions && process.versions.node;\n/**\n * `true` if current page is embedded.\n */\n\nenv.isEmbedded = env.isBrowser && window.self !== window.top;\n/**\n * The window object, or `undefined`.\n */\n\nenv.window = env.isBrowser && window;\n/**\n * The global objet, or `undefined`.\n */\n\nenv.global = env.isNode && global;\n/**\n * A require that only have effect in Node.js and that is invisible for package\n * bundlers.\n */\n\nenv.nodeRequire = function () {};\n\nif (env.isNode) {\n  var stealth_require = eval(\"require\");\n\n  env.nodeRequire = function (module) {\n    return stealth_require(module);\n  };\n}","\"use_strict\";\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nif (env.isBrowser) {\n  var StellarSdk = require(\"./stellar-sdk\");\n\n  var hash = \"0000000000000000000000000000000000000000000000000000000000000000\";\n  var memo = new StellarSdk.Memo(\"hash\", hash);\n  module.exports = memo.value.__proto__.constructor;\n} else {\n  module.exports = env.nodeRequire(\"safe-buffer\").Buffer;\n}","var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\n/**\n * Publish/read arbitrary data on the blockchain\n *\n * @private\n * @exports messenger\n */\nvar messenger = exports;\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar loopcall = require(\"@cosmic-plus/loopcall\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar resolve = require(\"./resolve\");\n/**\n * Sends a message to `destinations` with using `keypair`. The maximum size for\n * `content` is 6400 bytes minus the number of `destinations`. The cost of\n * emission is 1.01 stroop per destination + 1 stroop per 64 bytes to send. When a\n * destination account doesn't exist, it is created on-the-fly which incur an\n * additional cost of 1 lumen each\n *\n * @param {Keypair} keypair The keypair of the sender.\n * @param {string|Array} destinations An address or an array of addresses (either\n *   account IDs or federated addresses).\n * @param {string|Memo} object  (max. 28 bytes for string).\n * @param {string|Buffer} content The message content.\n * @returns {HorizonResponse}\n */\n\n\nmessenger.send =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(conf, keypair, destinations, object, content) {\n    var senderAccount, tx, server;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return resolve.account(conf, keypair.publicKey());\n\n          case 2:\n            senderAccount = _context.sent;\n            _context.next = 5;\n            return messenger.encode(conf, senderAccount, destinations, object, content);\n\n          case 5:\n            tx = _context.sent;\n            tx.sign(keypair);\n            server = resolve.network(conf);\n            return _context.abrupt(\"return\", server.submitTransaction(tx));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/**\n * Build a transaction to be signed by `senderAccount` that sends message to\n * `destinations`. The maximum size for `content` is 6400 bytes minus the number\n * of `destinations`. The cost of emission is 1.01 stroop per destination + 1\n * stroop per 64 bytes to send. When a destination account doesn't exist, it is\n * created on-the-fly which incur an additional cost of 1 lumen each.\n *\n * @param {AccountResponse} senderAccount The AccountResponse for sender\n * @param {string|Array} destination The account IDs where to send the message,\n *     or an array of account IDs.\n * @param {string|Memo} object The message object (max. 28 bytes for string).\n * @param {string|Buffer} content The message content.\n * @return {Transaction} A StellarSdk Transaction object.\n */\n\n\nmessenger.encode =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(conf, senderAccount, destinations, object, content) {\n    var txBuilder;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            txBuilder = new StellarSdk.TransactionBuilder(senderAccount, {\n              fee: 100\n            });\n            addMemo(txBuilder, object);\n            _context2.next = 4;\n            return addDestinations(conf, txBuilder, destinations);\n\n          case 4:\n            addContent(txBuilder, content);\n            return _context2.abrupt(\"return\", txBuilder.setTimeout(StellarSdk.InfiniteTimeout).build());\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x6, _x7, _x8, _x9, _x10) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction addMemo(txBuilder, memo) {\n  if (typeof memo === \"string\") {\n    var slicedMemo = Buffer.from(memo).slice(0, 28).toString();\n    memo = new StellarSdk.Memo(\"text\", slicedMemo);\n  }\n\n  if (memo) txBuilder.addMemo(memo);\n}\n\nfunction addDestinations(_x11, _x12, _x13) {\n  return _addDestinations.apply(this, arguments);\n}\n\nfunction _addDestinations() {\n  _addDestinations = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(conf, txBuilder, destinations) {\n    var index, accountId, addDestination;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            if (!Array.isArray(destinations)) destinations = [destinations];\n            _context7.t0 = _regeneratorRuntime.keys(destinations);\n\n          case 2:\n            if ((_context7.t1 = _context7.t0()).done) {\n              _context7.next = 11;\n              break;\n            }\n\n            index = _context7.t1.value;\n            accountId = destinations[index];\n            _context7.next = 7;\n            return linkToAccount(conf, accountId);\n\n          case 7:\n            addDestination = _context7.sent;\n            txBuilder.addOperation(addDestination);\n            _context7.next = 2;\n            break;\n\n          case 11:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _addDestinations.apply(this, arguments);\n}\n\nfunction linkToAccount(_x14, _x15) {\n  return _linkToAccount.apply(this, arguments);\n}\n\nfunction _linkToAccount() {\n  _linkToAccount = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee8(conf, accountId) {\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return resolve.accountIsEmpty(conf, accountId);\n\n          case 2:\n            if (!_context8.sent) {\n              _context8.next = 6;\n              break;\n            }\n\n            return _context8.abrupt(\"return\", operation(\"createAccount\", {\n              destination: accountId,\n              startingBalance: \"1\"\n            }));\n\n          case 6:\n            return _context8.abrupt(\"return\", operation(\"payment\", {\n              destination: accountId,\n              asset: StellarSdk.Asset[\"native\"](),\n              amount: \"0.0000001\"\n            }));\n\n          case 7:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _linkToAccount.apply(this, arguments);\n}\n\nfunction addContent(txBuilder, content) {\n  if (!(content instanceof Buffer)) content = Buffer.from(content);\n  var operationsLeft = 100 - txBuilder.operations.length;\n\n  if (content.length > operationsLeft * 64) {\n    // eslint-disable-next-line no-console\n    console.log(\"Warning: message will be truncated.\");\n  }\n\n  for (var i = 0; i < operationsLeft; i++) {\n    var chunk = content.slice(i * 64, i * 64 + 64);\n    if (chunk.length === 0) break;\n    var storeChunk = operation(\"manageData\", {\n      name: \"Send\",\n      value: chunk\n    });\n    txBuilder.addOperation(storeChunk);\n  }\n}\n\nfunction operation(type, params) {\n  return StellarSdk.Operation[type](params);\n}\n/**\n * Parse the message object from transaction `txHash`.\n *\n * @param {String} txHash A transaction hash\n * @return {Object} A message object with `sender`, `object`, `date` and\n *     `content` fields.\n */\n\n\nmessenger.read =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(conf, txHash) {\n    var server, callBuilder, txRecord;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            server = resolve.network(conf);\n            callBuilder = server.transactions().transaction(txHash);\n            _context3.next = 4;\n            return callBuilder.call();\n\n          case 4:\n            txRecord = _context3.sent;\n            return _context3.abrupt(\"return\", messenger.decode(conf, txRecord));\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x16, _x17) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nmessenger.decode = function (conf, txRecord) {\n  var transaction = new StellarSdk.Transaction(txRecord.envelope_xdr);\n  if (transaction.operations.length < 2) return null;\n  return {\n    sender: txRecord.source_account,\n    object: extractObject(transaction.memo),\n    date: txRecord.created_at,\n    content: extractContent(transaction)\n  };\n};\n\nfunction extractObject(memo) {\n  if (memo._type === \"hash\" || memo._type === \"return\") {\n    return memo._value.toString(\"hex\");\n  } else {\n    return memo._value.toString(\"utf8\");\n  }\n}\n\nfunction extractContent(transaction) {\n  var chunks = [];\n  transaction.operations.forEach(function (operation) {\n    if (isContentChunk(operation)) chunks.push(operation.value);\n  });\n  return Buffer.concat(chunks);\n}\n\nfunction isContentChunk(operation) {\n  return operation.type === \"manageData\" && operation.name === \"Send\";\n}\n\nmessenger.list =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(conf, accountId, options) {\n    var records;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return messenger.listRaw(conf, accountId, options);\n\n          case 2:\n            records = _context4.sent;\n            return _context4.abrupt(\"return\", records.map(function (record) {\n              return messenger.decode(conf, record);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x18, _x19, _x20) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nmessenger.listRaw =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(conf, accountId) {\n    var options,\n        server,\n        callBuilder,\n        _args5 = arguments;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            options = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : {};\n            _context5.next = 3;\n            return resolve.accountIsEmpty(conf, accountId);\n\n          case 3:\n            if (!_context5.sent) {\n              _context5.next = 5;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", []);\n\n          case 5:\n            server = resolve.server(conf);\n            callBuilder = server.transactions().forAccount(accountId);\n            if (options.cursor) callBuilder.cursor(options.cursor);\n            if (options.order) callBuilder.order(options.order);\n            options.filter = makeMessageFilter(options.filter);\n            return _context5.abrupt(\"return\", loopcall(callBuilder, options));\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x21, _x22) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nfunction makeMessageFilter(baseFilter) {\n  return function (record) {\n    if (record.operation_count < 2) return false;\n    if (baseFilter) return baseFilter(record);else return true;\n  };\n}\n\nmessenger.find =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(conf, publicKey, func) {\n    var records;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return messenger.list(conf, publicKey, {\n              limit: 1,\n              filter: func\n            });\n\n          case 2:\n            records = _context6.sent;\n\n            if (!records[0]) {\n              _context6.next = 5;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", records[0]);\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function (_x23, _x24, _x25) {\n    return _ref6.apply(this, arguments);\n  };\n}();","/**\n * Environment detection and library loading.\n */\n\n/**\n * Automatically pass library network configuration to underlying methods.\n */\n// baseConf may be modified only by multisig.useNetwork().\nvar baseConf = {};\n\nfunction prepare(module) {\n  var layer = {};\n\n  for (var name in module) {\n    if (typeof module[name] !== \"function\") continue;\n    layer[name] = passConfig(module[name]);\n  }\n\n  return Object.assign({}, module, layer);\n}\n\nfunction passConfig(func) {\n  return function () {\n    // Make a one-time configuration object and pass it to the underlying\n    // function along with user parameters.\n    var conf = Object.create(baseConf);\n\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    return func.apply(void 0, [conf].concat(params));\n  };\n}\n\nmodule.exports = prepare(require(\"./multisig\"));","var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\n/**\n * @exports multisig\n */\nvar multisig = exports;\n\nvar axios = require(\"@cosmic-plus/base/es5/axios\");\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar resolve = require(\"./resolve\");\n\nvar shareSignatures = require(\"./share-signatures\");\n\nvar shareTransactions = require(\"./share-transactions\");\n\nmultisig.isEnabled =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(conf, user) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return multisig.config(conf, user);\n\n          case 2:\n            conf.multisig = _context.sent;\n            return _context.abrupt(\"return\", !!conf.multisig);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nmultisig.config =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(conf, user) {\n    var account;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return getAccount(conf, user);\n\n          case 2:\n            account = _context2.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (!conf.multisig.id) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", conf.multisig);\n\n          case 8:\n            return _context2.abrupt(\"return\", null);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nmultisig.enable =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(conf, keypair, options) {\n    var account, transaction;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return getAccount(conf, keypair);\n\n          case 2:\n            account = _context3.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (!conf.multisig.id) {\n              _context3.next = 7;\n              break;\n            }\n\n            // eslint-disable-next-line no-console\n            console.log(\"On-chain signature sharing is already enabled on this account.\");\n            return _context3.abrupt(\"return\", null);\n\n          case 7:\n            transaction = makeSetupTx(conf, account, options);\n            return _context3.abrupt(\"return\", sendOrReturn(conf, transaction, keypair));\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x5, _x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nmultisig.setup =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(conf, keypair, options) {\n    var account, transaction;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return getAccount(conf, keypair);\n\n          case 2:\n            account = _context4.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context4.next = 6;\n              break;\n            }\n\n            throw new Error(\"On-chain signature sharing in not enabled on this account.\");\n\n          case 6:\n            transaction = makeSetupTx(conf, account, options);\n            return _context4.abrupt(\"return\", sendOrReturn(conf, transaction, keypair));\n\n          case 8:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x8, _x9, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nmultisig.disable =\n/*#__PURE__*/\nfunction () {\n  var _ref5 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(conf, keypair) {\n    var account, transaction;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return getAccount(conf, keypair);\n\n          case 2:\n            account = _context5.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context5.next = 7;\n              break;\n            }\n\n            // eslint-disable-next-line no-console\n            console.log(\"On-chain signature sharing is already disabled on this account.\");\n            return _context5.abrupt(\"return\", null);\n\n          case 7:\n            transaction = makeDisableTx(conf, account);\n            return _context5.abrupt(\"return\", sendOrReturn(conf, transaction, keypair));\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n/**\n *\n * @parameter {Transaction|XDR} transaction A signed transaction\n * @parameter {Keypair} [keypair]\n * @returns {Transaction|HorizonResponse}\n */\n\n\nmultisig.pushSignatures =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee6(conf, transaction, keypair) {\n    var account, senderId, pushTx, horizonResponse;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return resolve.account(conf, transaction.source);\n\n          case 2:\n            account = _context6.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context6.next = 6;\n              break;\n            }\n\n            throw new Error(\"On-chain signature sharing in not enabled on this account.\");\n\n          case 6:\n            saveNetwork();\n            senderId = keypair.publicKey();\n            _context6.next = 10;\n            return checkAccountExist(conf.multisig, senderId);\n\n          case 10:\n            _context6.next = 12;\n            return shareSignatures.makePushTx(conf, transaction, senderId);\n\n          case 12:\n            pushTx = _context6.sent;\n            horizonResponse = sendOrReturn(conf.multisig, pushTx, keypair);\n            horizonResponse[\"finally\"](restoreNetwork);\n            return _context6.abrupt(\"return\", horizonResponse);\n\n          case 16:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function (_x13, _x14, _x15) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nmultisig.pullSignatures =\n/*#__PURE__*/\nfunction () {\n  var _ref7 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee7(conf, transaction) {\n    var account, bool;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return getAccount(conf, transaction.source);\n\n          case 2:\n            account = _context7.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context7.next = 6;\n              break;\n            }\n\n            throw new Error(\"On-chain signature sharing in not enabled on this account.\");\n\n          case 6:\n            saveNetwork();\n            _context7.next = 9;\n            return shareSignatures.pull(conf, transaction);\n\n          case 9:\n            bool = _context7.sent;\n            restoreNetwork();\n            return _context7.abrupt(\"return\", bool);\n\n          case 12:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x16, _x17) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nmultisig.pushTransaction =\n/*#__PURE__*/\nfunction () {\n  var _ref8 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee8(conf, transaction, keypair) {\n    var account, senderId, legitSources, pushTx, horizonResponse;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.next = 2;\n            return getAccount(conf, keypair);\n\n          case 2:\n            account = _context8.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context8.next = 6;\n              break;\n            }\n\n            throw new Error(\"On-chain transaction sharing is not enabled on this account.\");\n\n          case 6:\n            senderId = keypair.publicKey();\n            legitSources = account.signers.map(function (signer) {\n              return signer.key;\n            });\n\n            if (legitSources.find(function (source) {\n              return source === senderId;\n            })) {\n              _context8.next = 10;\n              break;\n            }\n\n            throw new Error(\"Not a co-signer for transaction source account: \" + senderId);\n\n          case 10:\n            saveNetwork();\n            _context8.next = 13;\n            return checkAccountExist(conf.multisig, senderId);\n\n          case 13:\n            /// Shadow transaction signatures without modifying the underlying object.\n            transaction = Object.create(transaction);\n            transaction.signatures = [];\n            _context8.next = 17;\n            return shareTransactions.makePushTx(conf, transaction, senderId);\n\n          case 17:\n            pushTx = _context8.sent;\n            horizonResponse = sendOrReturn(conf.multisig, pushTx, keypair);\n            horizonResponse[\"finally\"](restoreNetwork);\n            return _context8.abrupt(\"return\", horizonResponse);\n\n          case 21:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function (_x18, _x19, _x20) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nmultisig.listTransactions =\n/*#__PURE__*/\nfunction () {\n  var _ref9 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee9(conf, user, ledger) {\n    var account;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return getAccount(conf, user);\n\n          case 2:\n            account = _context9.sent;\n            conf.multisig = parseMultisigConfig(account);\n\n            if (conf.multisig.id) {\n              _context9.next = 6;\n              break;\n            }\n\n            throw new Error(\"On-chain transaction sharing is not enabled on this account.\");\n\n          case 6:\n            return _context9.abrupt(\"return\", shareTransactions.list(conf, account, ledger));\n\n          case 7:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n\n  return function (_x21, _x22, _x23) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nmultisig.useNetwork = function (conf, network, server) {\n  return resolve.network(conf.__proto__, network, server);\n};\n/** ***************************** Routines *************************************/\n\n/**\n * Returns the transaction that enable signature sharing for `account`.\n */\n\n\nfunction makeSetupTx(conf, account) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var multisigId = options.id || conf.multisig.id || StellarSdk.Keypair.random().publicKey();\n  var txBuilder = new StellarSdk.TransactionBuilder(account, {\n    fee: 100\n  });\n  txBuilder.addMemo(new StellarSdk.Memo(\"text\", \"Setup signature sharing\"));\n  var isEmpty = true;\n\n  var setData = function setData(name, value) {\n    txBuilder.addOperation(StellarSdk.Operation.manageData({\n      name: name,\n      value: value\n    }));\n    isEmpty = false;\n  };\n\n  if (multisigId !== conf.multisig.id) setData(\"config:multisig\", multisigId);\n  if (!options.network) options.network = \"test\";\n\n  if ((options.network || conf.multisig.network) && options.network !== conf.multisig.network) {\n    setData(\"config:multisig:network\", options.network);\n  }\n\n  if ((options.server || conf.multisig.server) && options.server !== conf.multisig.server) {\n    setData(\"config:multisig:server\", options.server);\n  }\n\n  if (isEmpty) return null;else return txBuilder.setTimeout(StellarSdk.InfiniteTimeout).build();\n}\n/**\n * Returns the transaction that disable signature sharing for `account`.\n */\n\n\nfunction makeDisableTx(conf, account) {\n  var txBuilder = new StellarSdk.TransactionBuilder(account, {\n    fee: 100\n  });\n  txBuilder.addMemo(new StellarSdk.Memo(\"text\", \"Disable signature sharing\"));\n\n  var setData = function setData(name, value) {\n    txBuilder.addOperation(StellarSdk.Operation.manageData({\n      name: name,\n      value: value\n    }));\n  };\n\n  setData(\"config:multisig\", null);\n\n  if (account.data_attr[\"multisig:network\"]) {\n    setData(\"config:multisig:network\", null);\n  }\n\n  if (account.data_attr[\"multisig:server\"]) {\n    setData(\"config:multisig:server\", null);\n  }\n\n  return txBuilder.setTimeout(StellarSdk.InfiniteTimeout).build();\n}\n/** ************************ Generic helpers ***********************************/\n\n/**\n * Returns the multisig configuration.\n */\n\n\nfunction parseMultisigConfig(account) {\n  return {\n    id: readAttr(account.data_attr[\"config:multisig\"]),\n    network: readAttr(account.data_attr[\"config:multisig:network\"]) || \"test\",\n    server: readAttr(account.data_attr[\"config:multisig:server\"])\n  };\n}\n\nfunction readAttr(str64) {\n  if (str64) return Buffer.from(str64, \"base64\").toString(\"utf8\");\n}\n/**\n * If `user` is already an AccountResponse, return it. Else resolve it.\n */\n\n\nfunction getAccount(_x24, _x25) {\n  return _getAccount.apply(this, arguments);\n}\n\nfunction _getAccount() {\n  _getAccount = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee10(conf, user) {\n    var account;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            if (!isAccountResponse(user)) {\n              _context10.next = 4;\n              break;\n            }\n\n            return _context10.abrupt(\"return\", user);\n\n          case 4:\n            if (!(user instanceof StellarSdk.Keypair)) {\n              _context10.next = 8;\n              break;\n            }\n\n            user = user.publicKey();\n            _context10.next = 14;\n            break;\n\n          case 8:\n            if (!(user instanceof StellarSdk.Account)) {\n              _context10.next = 12;\n              break;\n            }\n\n            user = user._accountId;\n            _context10.next = 14;\n            break;\n\n          case 12:\n            if (!(typeof user !== \"string\")) {\n              _context10.next = 14;\n              break;\n            }\n\n            throw new TypeError(\"Invalid user parameter.\");\n\n          case 14:\n            _context10.next = 16;\n            return resolve.account(conf, user);\n\n          case 16:\n            account = _context10.sent;\n            return _context10.abrupt(\"return\", account);\n\n          case 18:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _getAccount.apply(this, arguments);\n}\n\nfunction isAccountResponse(obj) {\n  return obj && obj._baseAccount && obj._baseAccount instanceof StellarSdk.Account;\n}\n/**\n * Create `accoundId` if it is empty & on test network.\n */\n\n\nfunction checkAccountExist(_x26, _x27) {\n  return _checkAccountExist.apply(this, arguments);\n}\n/**\n * If `value` is a transaction, sign it with `keypair` and send it to horizon.\n * Else, return `value`.\n */\n\n\nfunction _checkAccountExist() {\n  _checkAccountExist = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee11(conf, accountId) {\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return resolve.accountIsEmpty(conf, accountId);\n\n          case 2:\n            if (!_context11.sent) {\n              _context11.next = 8;\n              break;\n            }\n\n            if (!(conf.network === \"test\")) {\n              _context11.next = 7;\n              break;\n            }\n\n            return _context11.abrupt(\"return\", axios(\"https://friendbot.stellar.org/?addr=\" + accountId));\n\n          case 7:\n            throw new Error(\"Account doesn't exist on the requested network: \" + conf.network);\n\n          case 8:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n  return _checkAccountExist.apply(this, arguments);\n}\n\nfunction sendOrReturn(_x28, _x29, _x30) {\n  return _sendOrReturn.apply(this, arguments);\n}\n/**\n * Save/Restore Network\n */\n\n\nfunction _sendOrReturn() {\n  _sendOrReturn = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee12(conf, value, keypair) {\n    var server, responsePromise;\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            if (!(value instanceof StellarSdk.Transaction)) {\n              _context12.next = 8;\n              break;\n            }\n\n            server = resolve.network(conf);\n            value.sign(keypair);\n            responsePromise = server.submitTransaction(value);\n            responsePromise[\"catch\"](function (error) {\n              return console.error(error.response);\n            });\n            return _context12.abrupt(\"return\", responsePromise);\n\n          case 8:\n            return _context12.abrupt(\"return\", value);\n\n          case 9:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n  return _sendOrReturn.apply(this, arguments);\n}\n\nvar networkBackup;\n\nfunction saveNetwork() {\n  networkBackup = StellarSdk.Network.current();\n}\n\nfunction restoreNetwork() {\n  if (StellarSdk.Network.current() !== networkBackup) {\n    // eslint-disable-next-line no-console\n    console.log(\"Restore network\");\n    StellarSdk.Network.use(networkBackup);\n  }\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","\"use_stict\";\n\nvar env = require(\"@cosmic-plus/jsutils/es5/env\");\n\nif (env.isBrowser) {\n  module.exports = require(\"./stellar-sdk\").axios;\n} else {\n  module.exports = env.nodeRequire(\"axios\");\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","\"use strict\";\n/**\n * Various independent helpers.\n *\n * @exports misc\n */\n\nvar misc = exports;\n/**\n * Return a function that will execute `thunk` when called, and return the\n * result of its execution as a Promise. Handle async and regular functions\n * equally. Any error will be carried to .catch.\n *\n * @param {function} thunk A parameterless function\n * @return {function}\n */\n\nmisc.delay = function (thunk) {\n  var firstCall = true;\n  var memoized;\n  return function () {\n    if (firstCall) {\n      firstCall = false;\n      memoized = new Promise(function (resolve) {\n        return resolve(thunk());\n      });\n    }\n\n    return memoized;\n  };\n};\n/**\n * Return a promise that takes `x` seconds to resolve\n *\n * @param {number} x Time to wait\n * @return {Promise}\n */\n\n\nmisc.timeout = function (x) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, x);\n  });\n};\n/**\n * Return `string` with first letter capitalized.\n *\n * @param {string} string\n * @return {string}\n */\n\n\nmisc.capitalize = function (string) {\n  return string.substr(0, 1).toUpperCase() + string.slice(1);\n};\n/**\n * Return shortified `string` if longer than 30 characters; else return\n * `string`.\n *\n * @param {string}\n * @return {string}\n */\n\n\nmisc.shorter = function (string) {\n  if (string.length > 50) {\n    return string.substr(0, 5) + \"...\" + string.substr(-5);\n  } else {\n    return string;\n  }\n};\n/**\n * Set `object` property `name` as hidden, and set it to `value`.\n */\n\n\nmisc.setHiddenProperty = function (object, name, value) {\n  Object.defineProperty(object, name, {\n    value: value,\n    enumerable: false,\n    configurable: true\n  });\n};\n/**\n * Log an error stating that `before` is deprecated.\n *\n * @param {string} date YYYY-MM or YYYY-MM-DD\n * @param {string} before Old function/property\n * @param {string} after New function/property\n */\n\n\nmisc.deprecated = function (date, before, after) {\n  console.error(\"Warning: \".concat(before, \" is deprecated and will be removed after \").concat(date, \". Please use \").concat(after, \" instead.\"));\n};\n/**\n * Creates and returns an extra field (`extra_ticot`) for **obj**. This allow to\n * append additional information to objects without mess.\n *\n * @param {Object}\n * @return {Object} The extra field object.\n */\n\n\nmisc.useExtra = function (obj) {\n  if (!obj[extraField]) misc.setHiddenProperty(obj, extraField, {});\n  return obj[extraField];\n};\n\nvar extraField = \"@cosmic-plus\";\n/**\n * Test if **string** is made of printable UTF8 characters. This is a simplified\n * test that is not robust.\n *\n * @param {String}\n * @return {Boolean}\n */\n\nmisc.isUtf8 = function (string) {\n  // eslint-disable-next-line no-control-regex\n  return !string.match(/[\\0-\\x1F\\x7F-\\x9F\\xAD\\uD7FC-\\uF8FF]/);\n};\n/**\n * Test if **string** is a base64 string.\n *\n * @param  {String} string\n * @return {Boolean}\n */\n\n\nmisc.isBase64 = function (string) {\n  return !!string.match(/^[0-9a-zA-Z+/]*=*$/);\n};\n/**\n * Return the YYYY-MM-DD date for **time** or for today.\n *\n * @param {String|Number} [time] A valid date/timestamp value\n * @return {String} YYYY-MM-DD date\n */\n\n\nmisc.day = function (time) {\n  var date = time ? new Date(time) : new Date();\n  return date.toISOString().replace(/T.*/, \"\");\n};\n/**\n * Deprecated functions\n */\n\n\nmisc.copy = function () {\n  return console.error(\"misc.copy() have been moved to html.copyString()\");\n};","\"use_strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\nvar shareSignatures = exports;\n\nvar Buffer = require(\"@cosmic-plus/base/es5/buffer\");\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar messenger = require(\"./messenger\");\n\nvar resolve = require(\"./resolve\");\n/**\n * Returns a sharing transaction that will push any new signature from\n * `transaction`. The sharing transactions should be signed by `accountId` and\n * sent to `conf.multisig.network`.\n */\n\n\nshareSignatures.makePushTx =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(conf, transaction, senderId) {\n    var signatures, txHash, signers, alreadyOnchain, newSignatures, sender, destination, object, message;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            signatures = transaction.signatures.map(function (entry) {\n              return entry.signature();\n            });\n\n            if (transaction.signatures.length) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 3:\n            /// Push only signatures that have not been uploaded yet.\n            txHash = transaction.hash();\n            _context.next = 6;\n            return resolve.txSignersList(conf, transaction);\n\n          case 6:\n            signers = _context.sent;\n            _context.next = 9;\n            return getSignatures(conf, txHash, signers);\n\n          case 9:\n            alreadyOnchain = _context.sent;\n            newSignatures = onlyInFirstArray(signatures, alreadyOnchain);\n\n            if (newSignatures.length) {\n              _context.next = 13;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 13:\n            _context.next = 15;\n            return resolve.account(conf.multisig, senderId);\n\n          case 15:\n            sender = _context.sent;\n            destination = conf.multisig.id;\n            object = new StellarSdk.Memo(\"return\", txHash);\n            message = Buffer.concat(signatures);\n            return _context.abrupt(\"return\", messenger.encode(conf.multisig, sender, destination, object, message));\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction onlyInFirstArray(array1, array2) {\n  return array1.filter(function (x) {\n    return !array2.find(function (y) {\n      return x.toString() === y.toString();\n    });\n  });\n}\n/**\n * Pull signatures for `transaction` published on `conf.multisig.network`.\n */\n\n\nshareSignatures.pull =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(conf, transaction) {\n    var txHash, signers, signatures;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            txHash = transaction.hash();\n            _context2.next = 3;\n            return resolve.txSignersList(conf, transaction);\n\n          case 3:\n            signers = _context2.sent;\n            _context2.next = 6;\n            return getSignatures(conf, txHash, signers);\n\n          case 6:\n            signatures = _context2.sent;\n            return _context2.abrupt(\"return\", mergeSignatures(transaction, signatures, txHash, signers));\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n/**\n * Returns an array of the signatures shared on-chain for `txHash`.\n */\n\n\nfunction getSignatures(_x6, _x7, _x8) {\n  return _getSignatures.apply(this, arguments);\n}\n\nfunction _getSignatures() {\n  _getSignatures = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(conf, txHash, signers) {\n    var txHash64, records, signatures, index, txRecord, transaction;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            txHash64 = txHash.toString(\"base64\");\n            _context3.next = 3;\n            return resolve.accountIsEmpty(conf.multisig, conf.multisig.id);\n\n          case 3:\n            if (!_context3.sent) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", []);\n\n          case 5:\n            _context3.next = 7;\n            return messenger.listRaw(conf.multisig, conf.multisig.id, {\n              filter: function filter(tx) {\n                return tx.memo_type === \"return\" && tx.memo === txHash64;\n              }\n            });\n\n          case 7:\n            records = _context3.sent;\n            signatures = [];\n            _context3.t0 = _regeneratorRuntime.keys(records);\n\n          case 10:\n            if ((_context3.t1 = _context3.t0()).done) {\n              _context3.next = 19;\n              break;\n            }\n\n            index = _context3.t1.value;\n            txRecord = records[index];\n            transaction = new StellarSdk.Transaction(txRecord.envelope_xdr);\n\n            if (isTxSourceLegit(transaction, signers)) {\n              _context3.next = 16;\n              break;\n            }\n\n            return _context3.abrupt(\"continue\", 10);\n\n          case 16:\n            transaction.operations.forEach(function (operation) {\n              if (containsSignature(operation)) signatures.push(operation.value);\n            });\n            _context3.next = 10;\n            break;\n\n          case 19:\n            return _context3.abrupt(\"return\", signatures);\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getSignatures.apply(this, arguments);\n}\n\nfunction isTxSourceLegit(transaction, signers) {\n  return signers.find(function (signer) {\n    return signer === transaction.source;\n  });\n}\n\nfunction containsSignature(operation) {\n  return operation.type === \"manageData\" && operation.name === \"Send\";\n}\n/**\n * Test `signatures` against `signers` and add new legit ones to `transaction`.\n */\n\n\nfunction mergeSignatures(transaction, signatures, txHash, signers) {\n  var newSignatures = false;\n  var txSigs = transaction.signatures.map(function (x) {\n    return x.signature().toString();\n  });\n  var keys = signers.map(function (x) {\n    return StellarSdk.Keypair.fromPublicKey(x);\n  });\n\n  var _loop = function _loop(index) {\n    var signature = signatures[index];\n    if (txSigs.find(function (x) {\n      return x === signature.toString();\n    })) return \"continue\";\n    var signer = keys.find(function (x) {\n      return x.verify(txHash, signature);\n    });\n    if (!signer) return \"continue\";\n    var decoratedSignature = makeDecorated(signer, signature);\n    transaction.signatures.push(decoratedSignature);\n    txSigs.push(signature.toString());\n    newSignatures = true;\n  };\n\n  for (var index in signatures) {\n    var _ret = _loop(index);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return newSignatures;\n}\n\nfunction makeDecorated(signer, signature) {\n  var Constructor = StellarSdk.xdr.DecoratedSignature;\n  return new Constructor({\n    hint: signer.signatureHint(),\n    signature: signature\n  });\n}","\"use_strict\";\n/**\n * Concatenate records from `callBuilder` call response that pass `options.filter`\n * until `options.limit` is reached, `options.breaker` returns a true value or\n * no more are available.\n *\n * **Warning**: Please be aware that unlimited loopcall can iterate over the\n * full set of data available on a network, sending thousands of request to the\n * API. Please use it wisely :)\n *\n * @example\n * const callBuilder = server.transactions().forAccount('GDE...YBX')\n * const allTransactions = await loopcall(callBuilder)\n * const transactionsWithoutMemo = await loopcall(callBuilder, {\n *   filter: (tx) => !tx.memo\n * })\n * const thisYearTransactions = await loopcall(callBuilder, {\n *   breaker: (tx) => tx.created_at.substr(0,4) < 2018\n * })\n *\n * @example\n * const callBuilder = server.operations().order('asc')\n * const the2000firstOperations = await loopcall(callBuilder, { limit: 2000 })\n * const the20firstAccountCreations = await loopcall(callBuilder, {\n *   limit: 20,\n *   filter: (op) => op.type === 'create_account'\n * })\n *\n * @param {CallBuilder} callBuilder A CallBuilder object\n * @param {Object} [options]\n * @param {integer} [options.limit] The maximum number of record to return\n * @param {function} [options.filter] A function that accept a record argument. It\n *   is called with each fetched record. If it returns a true value, the record\n *   is added to returned records, else it is discarded.\n * @param {function} [options.breaker] A function that accept a record argument.\n *   It is called with each fetched record. If it returns a true value, the loop\n *   ends and the array of the filtered records is returned.\n * @returns {Array} The fetched records\n */\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(callBuilder) {\n    var options,\n        callerLimit,\n        callAnswer,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            callerLimit = options.limit ? Math.min(options.limit, 200) : 200;\n            _context.next = 4;\n            return callBuilder.limit(callerLimit).call();\n\n          case 4:\n            callAnswer = _context.sent;\n\n            if (!(options.filter || options.breaker)) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", loopWithBreakpoints(callAnswer, options));\n\n          case 9:\n            return _context.abrupt(\"return\", loop(callAnswer, options.limit));\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n/**\n * Concatenate records from `callAnswer` pages until `limit` is reached or no\n * more are available.\n *\n * @param {Object} callAnswer A resolved CallBuilder.call() object\n * @param {integer} limit The maximum number of record to return\n * @returns {Array} The fetched records\n */\n\n\nfunction loop(_x2, _x3) {\n  return _loop.apply(this, arguments);\n}\n/**\n * Concatenate records from `callAnswer` pages that pass `options.filter` until\n * `options.limit` is reached, `options.breaker` returns a true value or no more\n * are available.\n *\n * @param {Object} callAnswer A resolved CallBuilder.call() object\n * @param {Object} [options]\n * @param {integer} [options.limit] The maximum number of record to return\n * @param {function} [options.filter] A function that accept a record argument. It\n *   is called with each fetched record. If it returns a true value, the record\n *   is added to returned records, else it is discarded.\n * @param {function} [options.breaker] A function that accept a record argument.\n *   It is called with each fetched record. If it returns a true value, the loop\n *   ends and the array of the filtered records is returned.\n * @returns {Array} The fetched records\n */\n\n\nfunction _loop() {\n  _loop = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(callAnswer, limit) {\n    var records, length, splitAt, tailRecords;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            records = [];\n\n          case 1:\n            if (!callAnswer.records.length) {\n              _context2.next = 18;\n              break;\n            }\n\n            if (!limit) {\n              _context2.next = 12;\n              break;\n            }\n\n            length = records.length + callAnswer.records.length;\n\n            if (!(limit === length)) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", records.concat(callAnswer.records));\n\n          case 8:\n            if (!(length > limit)) {\n              _context2.next = 12;\n              break;\n            }\n\n            splitAt = limit - records.length;\n            tailRecords = callAnswer.records.slice(0, splitAt);\n            return _context2.abrupt(\"return\", records.concat(tailRecords));\n\n          case 12:\n            records = records.concat(callAnswer.records);\n            _context2.next = 15;\n            return callAnswer.next();\n\n          case 15:\n            callAnswer = _context2.sent;\n            _context2.next = 1;\n            break;\n\n          case 18:\n            return _context2.abrupt(\"return\", records);\n\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loop.apply(this, arguments);\n}\n\nfunction loopWithBreakpoints(_x4, _x5) {\n  return _loopWithBreakpoints.apply(this, arguments);\n}\n\nfunction _loopWithBreakpoints() {\n  _loopWithBreakpoints = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(callAnswer, options) {\n    var records, index, nextRecord, recordTriggerBreak, recordPassTest;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            records = [];\n\n          case 1:\n            if (!callAnswer.records.length) {\n              _context3.next = 28;\n              break;\n            }\n\n            _context3.t0 = _regeneratorRuntime.keys(callAnswer.records);\n\n          case 3:\n            if ((_context3.t1 = _context3.t0()).done) {\n              _context3.next = 23;\n              break;\n            }\n\n            index = _context3.t1.value;\n\n            if (!(options.limit && records.length === options.limit)) {\n              _context3.next = 7;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", records);\n\n          case 7:\n            nextRecord = callAnswer.records[index];\n\n            if (!options.breaker) {\n              _context3.next = 14;\n              break;\n            }\n\n            _context3.next = 11;\n            return options.breaker(nextRecord);\n\n          case 11:\n            recordTriggerBreak = _context3.sent;\n\n            if (!recordTriggerBreak) {\n              _context3.next = 14;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", records);\n\n          case 14:\n            if (!options.filter) {\n              _context3.next = 20;\n              break;\n            }\n\n            _context3.next = 17;\n            return options.filter(nextRecord);\n\n          case 17:\n            recordPassTest = _context3.sent;\n\n            if (recordPassTest) {\n              _context3.next = 20;\n              break;\n            }\n\n            return _context3.abrupt(\"continue\", 3);\n\n          case 20:\n            records.push(nextRecord);\n            _context3.next = 3;\n            break;\n\n          case 23:\n            _context3.next = 25;\n            return callAnswer.next();\n\n          case 25:\n            callAnswer = _context3.sent;\n            _context3.next = 1;\n            break;\n\n          case 28:\n            return _context3.abrupt(\"return\", records);\n\n          case 29:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loopWithBreakpoints.apply(this, arguments);\n}","\"use_strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\nvar shareTransactions = exports;\n\nvar StellarSdk = require(\"@cosmic-plus/base/es5/stellar-sdk\");\n\nvar messenger = require(\"./messenger\");\n\nvar resolve = require(\"./resolve\");\n\nshareTransactions.list =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(conf, account) {\n    var lastLedger,\n        options,\n        legitSources,\n        txRecords,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            lastLedger = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            if (typeof lastLedger !== \"number\") lastLedger = +lastLedger;\n            options = {};\n            legitSources = listSignersKeys(account);\n\n            options.filter = function (record) {\n              return isLegitSharedTransaction(record, legitSources);\n            };\n\n            if (lastLedger) options.breaker = function (record) {\n              return record.ledger_attr <= lastLedger;\n            };\n            _context.next = 8;\n            return messenger.listRaw(conf.multisig, conf.multisig.id, options);\n\n          case 8:\n            txRecords = _context.sent;\n            return _context.abrupt(\"return\", txRecords.map(decodeTransactionRequest));\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction isLegitSharedTransaction(record, legitSources) {\n  if (record.memo_type !== \"hash\") return false;\n  return legitSources.find(function (accountId) {\n    return accountId === record.source_account;\n  });\n}\n\nfunction decodeTransactionRequest(record) {\n  var message = messenger.decode(null, record);\n  message.ledger = record.ledger_attr;\n  message.xdr = message.content.toString(\"base64\");\n  delete message.content;\n  delete message.object;\n  return message;\n}\n\nshareTransactions.makePushTx =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(conf, transaction, senderId) {\n    var txHash, sender, destination, object, content;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            txHash = transaction.hash();\n            _context2.next = 3;\n            return transactionHasBeenPushed(conf, txHash);\n\n          case 3:\n            if (!_context2.sent) {\n              _context2.next = 6;\n              break;\n            }\n\n            // eslint-disable-next-line no-console\n            console.log(\"Transaction have already been pushed\");\n            return _context2.abrupt(\"return\", null);\n\n          case 6:\n            _context2.next = 8;\n            return resolve.account(conf.multisig, senderId);\n\n          case 8:\n            sender = _context2.sent;\n            destination = conf.multisig.id;\n            object = new StellarSdk.Memo(\"hash\", txHash);\n            content = transaction.toEnvelope().toXDR();\n            return _context2.abrupt(\"return\", messenger.encode(conf.multisig, sender, destination, object, content));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction transactionHasBeenPushed(_x6, _x7) {\n  return _transactionHasBeenPushed.apply(this, arguments);\n}\n\nfunction _transactionHasBeenPushed() {\n  _transactionHasBeenPushed = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(conf, txHash) {\n    var txHash64, tester, record;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            txHash64 = txHash.toString(\"base64\");\n\n            tester = function tester(record) {\n              return recordHasMemo(record, \"hash\", txHash64);\n            };\n\n            _context3.next = 4;\n            return messenger.find(conf.multisig, conf.multisig.id, tester);\n\n          case 4:\n            record = _context3.sent;\n            return _context3.abrupt(\"return\", !!record);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _transactionHasBeenPushed.apply(this, arguments);\n}\n\nfunction recordHasMemo(record, type, value) {\n  return record.memo_type === type && record.memo === value;\n}\n\nfunction listSignersKeys(account) {\n  return account.signers.map(function (signer) {\n    return signer.key;\n  });\n}"],"sourceRoot":""}