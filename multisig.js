!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.multisig=e():t.multisig=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var u=e[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)r.d(n,u,function(e){return t[e]}.bind(null,u));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e,r){"use_strict";const n=r(3);if(n.isBrowser){if(void 0===StellarSdk)throw new Error("Missing dependency: StellarSdk");t.exports=StellarSdk}else t.exports=n.nodeRequire("stellar-sdk")},function(t,e,r){t.exports=r(8)},function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),u=function(){var t=c(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m[e]=r,t.next=3,f.timeout(1e3*s.accountCacheExpiration);case 3:delete m[e];case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),i=function(){var t=c(n.default.mark(function t(e,r){var u,i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.FederationServer.resolve(r);case 2:if(u=t.sent,i=u.account_id){t.next=6;break}throw new Error("Invalid response from federation server.");case 6:return u.memo_type||void 0===u.memo||delete u.memo,r!==i&&(u.address=r),(a=e.aliases&&e.aliases[i])&&(u.alias=a),t.abrupt("return",u);case 11:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=c(n.default.mark(function t(e,r){var u;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=s.txSources(e,r),t.abrupt("return",s.signersList.apply(s,[e].concat(o(u))));case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}();function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(u,i){try{var a=e[u](i),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var s=e,f=r(11),l=r(0);function p(t){if(t)return"public"===t?l.Networks.PUBLIC:"test"===t?l.Networks.TESTNET:t;var e=l.Network.current();return e?e.networkPassphrase():void 0}s.server=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.network,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.server,n=p(e);if(!n)throw new Error("No network selected.");return v(n,r)},s.network=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.network,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.server,n=p(),u=p(e);if(n!==u)console.log("Switch to network: "+e),l.Network.use(new l.Network(u)),n=u;else if(!n)throw new Error("No network selected.");return v(n,r)};var d={},h={};function v(t,e){if(e?h[t]=e:e=h[t],!e)throw new Error("No default server for requested network.");return d[e]||(d[e]=new l.Server(e)),d[e]}v(l.Networks.PUBLIC,"https://horizon.stellar.org"),v(l.Networks.TESTNET,"https://horizon-testnet.stellar.org"),s.accountCacheExpiration=300;var m={};s.address=function(t,e){if(m[e])return m[e];var r=i(t,e);return u(e,r),r},s.account=function(){var t=c(n.default.mark(function t(e,r){var u,i,a,o,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.network;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=s.server(e,c),t.next=3,s.address(e,r);case 3:return i=t.sent,a=i.account_id,t.next=7,u.loadAccount(a);case 7:return o=t.sent,t.abrupt("return",o);case 9:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),s.accountIsEmpty=function(){var t=c(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.account(e,r).then(function(t){return!1}).catch(function(t){return!0}));case 1:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),s.transaction=function(){var t=c(n.default.mark(function t(e,r){var u;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=e.server.transactions(),t.abrupt("return",u.transaction(r).call());case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),s.accountSigners=function(){var t=c(n.default.mark(function t(e,r){var u;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.account(e,r);case 2:return u=t.sent,t.abrupt("return",u.signers);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),s.signersTable=function(){var t=c(n.default.mark(function t(e){for(var r=arguments.length,u=Array(r>1?r-1:0),i=1;i<r;i++)u[i-1]=arguments[i];var a,o,c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={},t.t0=n.default.keys(u);case 2:if((t.t1=t.t0()).done){t.next=10;break}return o=t.t1.value,t.next=6,s.account(e,u[o]);case 6:c=t.sent,a[c.id]||(a[c.id]=c.signers),t.next=2;break;case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),s.signersList=function(){var t=c(n.default.mark(function t(e){for(var r=arguments.length,u=Array(r>1?r-1:0),i=1;i<r;i++)u[i-1]=arguments[i];var a,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],t.t0=n.default.keys(u);case 2:if((t.t1=t.t0()).done){t.next=10;break}return o=t.t1.value,t.next=6,s.account(e,u[o]);case 6:t.sent.signers.forEach(function(t){a.find(function(e){return e.key===t.key})||a.push(t.key)}),t.next=2;break;case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),s.txSources=function(t,e){var r=w(e);if(r.sources)return r.sources;var n=[e.source],u=function(t){var r=e.operations[t].source;r&&!n.find(function(t){return t===r})&&n.push(r)};for(var i in e.operations)u(i);return r.sources=n,n},s.txSignersList=function(){var t=c(n.default.mark(function t(e,r){var u;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(u=w(r)).signers||(u.signers=a(e,r)),t.abrupt("return",u.signers);case 3:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}();var g="extra_ocmultisig";function w(t){return t[g]||(t[g]={}),t[g]}},function(module,exports){"use_strict";const env=exports;env.isBrowser=new Function("try { return this === window } catch (e) { return false }")(),env.isNode=new Function("try { return this === global } catch (e) { return false }")(),env.nodeRequire=function(t){if(env.isNode)return stealth_require(t)};const stealth_require=env.isNode&&eval("require")},function(t,e,r){"use_strict";const n=r(3);if(n.isBrowser){const e="0000000000000000000000000000000000000000000000000000000000000000",n=new(r(0).Memo)("hash",e);t.exports=n.value.__proto__.constructor}else t.exports=n.nodeRequire("safe-buffer").Buffer},function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),u=function(){var t=a(n.default.mark(function t(e,r,u){var a,o,c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Array.isArray(u)||(u=[u]),t.t0=n.default.keys(u);case 2:if((t.t1=t.t0()).done){t.next=11;break}return a=t.t1.value,o=u[a],t.next=7,i(e,o);case 7:c=t.sent,r.addOperation(c),t.next=2;break;case 11:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),i=function(){var t=a(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.accountIsEmpty(e,r);case 2:if(!t.sent){t.next=6;break}return t.abrupt("return",h("createAccount",{destination:r,startingBalance:"1"}));case 6:return t.abrupt("return",h("payment",{destination:r,asset:f.Asset.native(),amount:"0.0000001"}));case 7:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}();function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(u,i){try{var a=e[u](i),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var o=e,c=r(4),s=r(14),f=r(0),l=r(2);function p(t,e){if("string"==typeof e){var r=c.from(e).slice(0,28).toString();e=new f.Memo("text",r)}e&&t.addMemo(e)}function d(t,e){e instanceof c||(e=c.from(e));var r=100-t.operations.length;e.length>64*r&&console.log("Warning: message will be truncated.");for(var n=0;n<r;n++){var u=e.slice(64*n,64*n+64);if(0===u.length)break;var i=h("manageData",{name:"Send",value:u});t.addOperation(i)}}function h(t,e){return f.Operation[t](e)}function v(t){return function(e){return!(e.operation_count<2)&&(!t||t(e))}}o.send=function(){var t=a(n.default.mark(function t(e,r,u,i,a){var c,s,f;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.account(e,r.publicKey());case 2:return c=t.sent,t.next=5,o.encode(e,c,u,i,a);case 5:return(s=t.sent).sign(r),f=l.network(e),t.abrupt("return",f.submitTransaction(s));case 9:case"end":return t.stop()}},t,this)}));return function(e,r,n,u,i){return t.apply(this,arguments)}}(),o.encode=function(){var t=a(n.default.mark(function t(e,r,i,a,o){var c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p(c=new f.TransactionBuilder(r),a),t.next=4,u(e,c,i);case 4:return d(c,o),t.abrupt("return",c.build());case 6:case"end":return t.stop()}},t,this)}));return function(e,r,n,u,i){return t.apply(this,arguments)}}(),o.read=function(){var t=a(n.default.mark(function t(e,r){var u,i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=l.network(e),i=u.transactions().transaction(r),t.next=4,i.call();case 4:return a=t.sent,t.abrupt("return",o.decode(e,a));case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),o.decode=function(t,e){var r=new f.Transaction(e.envelope_xdr);return r.operations.length<2?null:{sender:e.source_account,object:function(t){return"hash"===t._type||"return"===t._type?t._value.toString("hex"):t._value.toString("utf8")}(r.memo),date:e.created_at,content:function(t){var e=[];return t.operations.forEach(function(t){(function(t){return"manageData"===t.type&&"Send"===t.name})(t)&&e.push(t.value)}),c.concat(e)}(r)}},o.list=function(){var t=a(n.default.mark(function t(e,r,u){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.listRaw(e,r,u);case 2:return i=t.sent,t.abrupt("return",i.map(function(t){return o.decode(e,t)}));case 4:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),o.listRaw=function(){var t=a(n.default.mark(function t(e,r){var u,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.accountIsEmpty(e,r);case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",[]);case 4:return u=l.server(e),i=u.transactions().forAccount(r),a.cursor&&i.cursor(a.cursor),a.order&&i.order(a.order),a.filter=v(a.filter),t.abrupt("return",s(i,a));case 10:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),o.find=function(){var t=a(n.default.mark(function t(e,r,u){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.list(e,r,{limit:1,filter:u});case 2:if(!(i=t.sent)[0]){t.next=5;break}return t.abrupt("return",i[0]);case 5:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()},function(t,e,r){"use strict";r(0);var n={};function u(t){return function(){for(var e=Object.create(n),r=arguments.length,u=Array(r),i=0;i<r;i++)u[i]=arguments[i];return t.apply(void 0,[e].concat(u))}}t.exports=function(t){var e={};for(var r in t)"function"==typeof t[r]&&(e[r]=u(t[r]));return Object.assign({},t,e)}(r(7))},function(t,e,r){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),u=function(){var t=o(n.default.mark(function t(e,r){var u;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!y(r)){t.next=4;break}return t.abrupt("return",r);case 4:if(!(r instanceof l.Keypair)){t.next=8;break}r=r.publicKey(),t.next=14;break;case 8:if(!(r instanceof l.Account)){t.next=12;break}r=r._accountId,t.next=14;break;case 12:if("string"==typeof r){t.next=14;break}throw new TypeError("Invalid user parameter.");case 14:return t.next=16,p.account(e,r);case 16:return u=t.sent,t.abrupt("return",u);case 18:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),i=function(){var t=o(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.accountIsEmpty(e,r);case 2:if(!t.sent){t.next=8;break}if("test"!==e.network){t.next=7;break}return t.abrupt("return",s("https://friendbot.stellar.org/?addr="+r));case 7:throw new Error("Account doesn't exist on the requested network: "+e.network);case 8:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),a=function(){var t=o(n.default.mark(function t(e,r,u){var i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r instanceof l.Transaction)){t.next=8;break}return i=p.network(e),r.sign(u),(a=i.submitTransaction(r)).catch(function(t){return console.error(t.response)}),t.abrupt("return",a);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}();function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(u,i){try{var a=e[u](i),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var c=e,s=r(10),f=r(4),l=r(0),p=r(2),d=r(13),h=r(15);function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.id||t.multisig.id||l.Keypair.random().publicKey(),u=new l.TransactionBuilder(e);u.addMemo(new l.Memo("text","Setup signature sharing"));var i=!0,a=function(t,e){u.addOperation(l.Operation.manageData({name:t,value:e})),i=!1};return n!==t.multisig.id&&a("config:multisig",n),r.network||(r.network="test"),(r.network||t.multisig.network)&&r.network!==t.multisig.network&&a("config:multisig:network",r.network),(r.server||t.multisig.server)&&r.server!==t.multisig.server&&a("config:multisig:server",r.server),i?null:u.build()}function m(t,e){var r=new l.TransactionBuilder(e);r.addMemo(new l.Memo("text","Disable signature sharing"));var n=function(t,e){r.addOperation(l.Operation.manageData({name:t,value:e}))};return n("config:multisig",null),e.data_attr["multisig:network"]&&n("config:multisig:network",null),e.data_attr["multisig:server"]&&n("config:multisig:server",null),r.build()}function g(t){return{id:w(t.data_attr["config:multisig"]),network:w(t.data_attr["config:multisig:network"])||"test",server:w(t.data_attr["config:multisig:server"])}}function w(t){if(t)return f.from(t,"base64").toString("utf8")}function y(t){return t&&t._baseAccount&&t._baseAccount instanceof l.Account}c.isEnabled=function(){var t=o(n.default.mark(function t(e,r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.config(e,r);case 2:return e.multisig=t.sent,t.abrupt("return",!!e.multisig);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),c.config=function(){var t=o(n.default.mark(function t(e,r){var i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r);case 2:if(i=t.sent,e.multisig=g(i),!e.multisig.id){t.next=8;break}return t.abrupt("return",e.multisig);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),c.enable=function(){var t=o(n.default.mark(function t(e,r,i){var o,c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r);case 2:if(o=t.sent,e.multisig=g(o),!e.multisig.id){t.next=7;break}return console.log("On-chain signature sharing is already enabled on this account."),t.abrupt("return",null);case 7:return c=v(e,o,i),t.abrupt("return",a(e,c,r));case 9:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),c.setup=function(){var t=o(n.default.mark(function t(e,r,i){var o,c;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r);case 2:if(o=t.sent,e.multisig=g(o),e.multisig.id){t.next=6;break}throw new Error("On-chain signature sharing in not enabled on this account.");case 6:return c=v(e,o,i),t.abrupt("return",a(e,c,r));case 8:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),c.disable=function(){var t=o(n.default.mark(function t(e,r){var i,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r);case 2:if(i=t.sent,e.multisig=g(i),e.multisig.id){t.next=7;break}return console.log("On-chain signature sharing is already disabled on this account."),t.abrupt("return",null);case 7:return o=m(e,i),t.abrupt("return",a(e,o,r));case 9:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),c.pushSignatures=function(){var t=o(n.default.mark(function t(e,r,u){var o,c,s,f;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.account(e,r.source);case 2:if(o=t.sent,e.multisig=g(o),e.multisig.id){t.next=6;break}throw new Error("On-chain signature sharing in not enabled on this account.");case 6:return b(),c=u.publicKey(),t.next=10,i(e.multisig,c);case 10:return t.next=12,d.makePushTx(e,r,c);case 12:return s=t.sent,(f=a(e.multisig,s,u)).finally(k),t.abrupt("return",f);case 16:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),c.pullSignatures=function(){var t=o(n.default.mark(function t(e,r){var i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r.source);case 2:if(i=t.sent,e.multisig=g(i),e.multisig.id){t.next=6;break}throw new Error("On-chain signature sharing in not enabled on this account.");case 6:return b(),t.next=9,d.pull(e,r);case 9:return a=t.sent,k(),t.abrupt("return",a);case 12:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),c.pushTransaction=function(){var t=o(n.default.mark(function t(e,r,o){var c,s,f,l;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,o);case 2:if(c=t.sent,e.multisig=g(c),e.multisig.id){t.next=6;break}throw new Error("On-chain transaction sharing is not enabled on this account.");case 6:if(s=o.publicKey(),c.signers.map(function(t){return t.key}).find(function(t){return t===s})){t.next=10;break}throw new Error("Not a co-signer for transaction source account: "+s);case 10:return b(),t.next=13,i(e.multisig,s);case 13:return(r=Object.create(r)).signatures=[],t.next=17,h.makePushTx(e,r,s);case 17:return f=t.sent,(l=a(e.multisig,f,o)).finally(k),t.abrupt("return",l);case 21:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),c.listTransactions=function(){var t=o(n.default.mark(function t(e,r,i){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,r);case 2:if(a=t.sent,e.multisig=g(a),e.multisig.id){t.next=6;break}throw new Error("On-chain transaction sharing is not enabled on this account.");case 6:return t.abrupt("return",h.list(e,a,i));case 7:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),c.useNetwork=function(t,e,r){return p.network(t.__proto__,e,r)};var x=void 0;function b(){x=l.Network.current()}function k(){l.Network.current()!==x&&(console.log("Restore network"),l.Network.use(x))}},function(t,e,r){var n=function(){return this}()||Function("return this")(),u=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=u&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(9),u)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,u=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",s="object"==typeof t,f=e.regeneratorRuntime;if(f)s&&(t.exports=f);else{(f=e.regeneratorRuntime=s?t.exports:{}).wrap=x;var l="suspendedStart",p="suspendedYield",d="executing",h="completed",v={},m={};m[a]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==n&&u.call(w,a)&&(m=w);var y=E.prototype=k.prototype=Object.create(m);_.prototype=y.constructor=E,E.constructor=_,E[c]=_.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(y),t},f.awrap=function(t){return{__await:t}},S(O.prototype),O.prototype[o]=function(){return this},f.AsyncIterator=O,f.async=function(t,e,r,n){var u=new O(x(t,e,r,n));return f.isGeneratorFunction(e)?u:u.next().then(function(t){return t.done?t.value:u.next()})},S(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=j,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,u){return o.type="throw",o.arg=t,e.next=n,u&&(e.method="next",e.arg=r),!!u}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=u.call(a,"catchLoc"),s=u.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&u.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var u=n.arg;T(r)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function x(t,e,r,n){var u=e&&e.prototype instanceof k?e:k,i=Object.create(u.prototype),a=new P(n||[]);return i._invoke=function(t,e,r){var n=l;return function(u,i){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===u)throw i;return M()}for(r.method=u,r.arg=i;;){var a=r.delegate;if(a){var o=L(a,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var c=b(t,e,r);if("normal"===c.type){if(n=r.done?h:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function k(){}function _(){}function E(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(t){var e;this._invoke=function(r,n){function i(){return new Promise(function(e,i){!function e(r,n,i,a){var o=b(t[r],t,n);if("throw"!==o.type){var c=o.arg,s=c.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(s).then(function(t){c.value=t,i(c)},a)}a(o.arg)}(r,n,e,i)})}return e=e?e.then(i,i):i()}}function L(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,L(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var u=b(n,t.iterator,e.arg);if("throw"===u.type)return e.method="throw",e.arg=u.arg,e.delegate=null,v;var i=u.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function j(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,r){"use_stict";const n=r(3);n.isBrowser?t.exports=r(0).axios:t.exports=n.nodeRequire("axios")},function(t,e,r){"use strict";const n=e,u=r(12);n.delay=function(t){let e,r=!0;return function(){return r&&(r=!1,e=new Promise(e=>e(t()))),e}},n.timeout=function(t){return new Promise(function(e){setTimeout(e,t)})},n.capitalize=function(t){return t.substr(0,1).toUpperCase()+t.slice(1)},n.shorter=function(t){return t.length>50?t.substr(0,5)+"..."+t.substr(-5):t},n.copy=function(t){const e=u.create("textarea",{},t);u.append(u.grab("body"),e),u.copyContent(e),u.destroy(e)},n.useExtra=function(t){return t[i]||(t[i]={}),t[i]};const i="_extra_ticot"},function(t,e){"use_strict";const r=e;r.append=function(t,...e){e.forEach(e=>{"string"==typeof e||e instanceof Error?t.appendChild(document.createTextNode(e)):t.appendChild(e)})},r.appendClass=function(t,e){t.className+=" "+e},r.clear=function(t){t.innerHTML=""},r.copyContent=function(t){if(t.selectionStart===t.selectionEnd)return t.select(),document.execCommand("copy")},r.create=function(t,e,...n){if(!t)throw new Error("Missing tag name");const u=document.createElement(t);if("string"==typeof e)switch(e.substr(0,1)){case"#":u.id=e.substr(1);break;case".":u.className=e.substr(1);break;default:throw new Error("Unhandled attribute")}else{let t;for(t in e)u[t]=e[t]}return n.length>0&&r.append(u,...n),u},r.destroy=function(t){try{t.innerHTML="",t.parentNode&&t.parentNode.removeChild(t)}catch(t){console.error(t)}},r.grab=function(t,e=document){return e.querySelector(t)},r.show=function(...t){t.forEach(t=>t.style.display="block")},r.hide=function(...t){t.forEach(t=>t.style.display="none")},r.replace=function(t,e){t.parentNode.replaceChild(e,t)},r.rewrite=function(t,...e){r.clear(t),r.append(t,...e)}},function(t,e,r){"use strict";"use_strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),u=function(){var t=i(n.default.mark(function t(e,r,u){var i,a,o,l,h,v;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.toString("base64"),t.next=3,f.accountIsEmpty(e.multisig,e.multisig.id);case 3:if(!t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:return t.next=7,s.listRaw(e.multisig,e.multisig.id,{filter:function(t){return"return"===t.memo_type&&t.memo===i}});case 7:a=t.sent,o=[],t.t0=n.default.keys(a);case 10:if((t.t1=t.t0()).done){t.next=19;break}if(l=t.t1.value,h=a[l],p(v=new c.Transaction(h.envelope_xdr),u)){t.next=16;break}return t.abrupt("continue",10);case 16:v.operations.forEach(function(t){d(t)&&o.push(t.value)}),t.next=10;break;case 19:return t.abrupt("return",o);case 20:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}();function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(u,i){try{var a=e[u](i),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var a=e,o=r(4),c=r(0),s=r(5),f=r(2);function l(t,e){return t.filter(function(t){return!e.find(function(e){return t.toString()===e.toString()})})}function p(t,e){return e.find(function(e){return e===t.source})}function d(t){return"manageData"===t.type&&"Send"===t.name}function h(t,e,r,n){var u=!1,i=t.signatures.map(function(t){return t.signature().toString()}),a=n.map(function(t){return c.Keypair.fromPublicKey(t)}),o=function(n){var o=e[n];if(i.find(function(t){return t===o.toString()}))return"continue";var s=a.find(function(t){return t.verify(r,o)});if(!s)return"continue";var f=function(t,e){return new(0,c.xdr.DecoratedSignature)({hint:t.signatureHint(),signature:e})}(s,o);t.signatures.push(f),i.push(o.toString()),u=!0};for(var s in e)o(s);return u}a.makePushTx=function(){var t=i(n.default.mark(function t(e,r,i){var a,p,d,h,v,m,g,w;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.signatures.map(function(t){return t.signature()}),r.signatures.length){t.next=3;break}return t.abrupt("return",null);case 3:return p=r.hash(),t.next=6,f.txSignersList(e,r);case 6:return d=t.sent,t.next=9,u(e,p,d);case 9:if(h=t.sent,l(a,h).length){t.next=13;break}return t.abrupt("return",null);case 13:return t.next=15,f.account(e.multisig,i);case 15:return v=t.sent,m=e.multisig.id,g=new c.Memo("return",p),w=o.concat(a),t.abrupt("return",s.encode(e.multisig,v,m,g,w));case 20:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}(),a.pull=function(){var t=i(n.default.mark(function t(e,r){var i,a,o;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.hash(),t.next=3,f.txSignersList(e,r);case 3:return a=t.sent,t.next=6,u(e,i,a);case 6:return o=t.sent,t.abrupt("return",h(r,o,i,a));case 8:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},function(t,e){"use_strict";t.exports=async function(t,e={}){const r=e.limit?Math.min(e.limit,200):200,n=await t.limit(r).call();return e.filter||e.breaker?async function(t,e){const r=[];for(;t.records.length;){for(let n in t.records){if(e.limit&&r.length===e.limit)return r;const u=t.records[n];if(e.breaker){const t=await e.breaker(u);if(t)return r}if(e.filter){const t=await e.filter(u);if(!t)continue}r.push(u)}t=await t.next()}return r}(n,e):async function(t,e){let r=[];for(;t.records.length;){if(e){const n=r.length+t.records.length;if(e===n)return r.concat(t.records);if(n>e){const n=e-r.length,u=t.records.slice(0,n);return r.concat(u)}}r=r.concat(t.records),t=await t.next()}return r}(n,e.limit)}},function(t,e,r){"use strict";"use_strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(r(1)),u=function(){var t=i(n.default.mark(function t(e,r){var u,i,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=r.toString("base64"),i=function(t){return p(t,"hash",u)},t.next=4,c.find(e.multisig,e.multisig.id,i);case 4:return a=t.sent,t.abrupt("return",!!a);case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}();function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(u,i){try{var a=e[u](i),o=a.value}catch(t){return void r(t)}if(!a.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var a=e,o=r(0),c=r(5),s=r(2);function f(t,e){return"hash"===t.memo_type&&e.find(function(e){return e===t.source_account})}function l(t){var e=c.decode(null,t);return e.ledger=t.ledger_attr,e.xdr=e.content.toString("base64"),delete e.content,delete e.object,e}function p(t,e,r){return t.memo_type===e&&t.memo===r}function d(t){return t.signers.map(function(t){return t.key})}a.list=function(){var t=i(n.default.mark(function t(e,r){var u,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"number"!=typeof o&&(o=+o),u={},i=d(r),u.filter=function(t){return f(t,i)},o&&(u.breaker=function(t){return t.ledger_attr<=o}),t.next=7,c.listRaw(e.multisig,e.multisig.id,u);case 7:return a=t.sent,t.abrupt("return",a.map(l));case 9:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),a.makePushTx=function(){var t=i(n.default.mark(function t(e,r,i){var a,f,l,p,d;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.hash(),t.next=3,u(e,a);case 3:if(!t.sent){t.next=6;break}return console.log("Transaction have already been pushed"),t.abrupt("return",null);case 6:return t.next=8,s.account(e.multisig,i);case 8:return f=t.sent,l=e.multisig.id,p=new o.Memo("hash",a),d=r.toEnvelope().toXDR(),t.abrupt("return",c.encode(e.multisig,f,l,p,d));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}])});
//# sourceMappingURL=multisig.js.map